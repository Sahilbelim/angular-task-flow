<div class="min-h-screen flex items-start md:items-center justify-center
            bg-[#f3f7ff] px-4 pt-[88px] md:pt-0 pb-8">

    <div class="w-full max-w-[420px]
              bg-white rounded-3xl
              shadow-[0_30px_80px_rgba(59,130,246,0.25)]
              p-6 md:p-8">

        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">
            Change Password
        </h2>

        <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-5">

            <!-- CURRENT PASSWORD -->
            <div class="relative">
                <input [type]="showCurrent ? 'text' : 'password'" formControlName="currentPassword"
                    placeholder="Current password" class="w-full rounded-xl border border-blue-200 px-4 py-2.5 pr-12
                 focus:ring-2 focus:ring-blue-500 outline-none" />

                <button type="button" (click)="showCurrent = !showCurrent" class="absolute right-4 top-3 text-gray-500">
                    <i class="bx" [class.bx-eye]="!showCurrent" [class.bx-eye-slash]="showCurrent"></i>
                </button>

                @if (form.get('currentPassword')?.touched && form.get('currentPassword')?.invalid) {
                <p class="text-red-500 text-xs mt-1">
                    Current password is required
                </p>
                }
            </div>

            <!-- NEW PASSWORD -->
            <div>
                <div class="relative">
                <input [type]="showNew ? 'text' : 'password'" formControlName="newPassword" placeholder="New password" maxlength="32"
                    class="w-full rounded-xl border border-blue-200 px-4 py-2.5 pr-12
                         focus:ring-2 focus:ring-blue-500 outline-none" />


                    <button type="button" (click)="showNew = !showNew" class="absolute right-4 top-3 text-gray-500">
                        <i class="bx" [class.bx-eye]="!showNew" [class.bx-eye-slash]="showNew"></i>
                    </button>
                </div>

                <!-- PASSWORD RULES   -->
        @if (newPassword?.touched && newPassword?.errors?.['required']) {
        <p class="text-red-500 text-xs mt-1">
            New password is required
        </p>
        }
@if (
newPassword?.touched &&
newPassword?.invalid &&
!newPassword?.errors?.['required']
) {
<div class="mt-3 space-y-1.5 text-sm">

    <p class="text-gray-600 mb-2">
        Your password must include:
    </p>

    <div class="flex items-center gap-2" [class.text-green-600]="hasUppercase" [class.text-red-500]="!hasUppercase">
        <i class="bx" [class.bx-check-circle]="hasUppercase" [class.bx-x-circle]="!hasUppercase"></i>
        At least one uppercase letter (A–Z)
    </div>

    <div class="flex items-center gap-2" [class.text-green-600]="hasLowercase" [class.text-red-500]="!hasLowercase">
        <i class="bx" [class.bx-check-circle]="hasLowercase" [class.bx-x-circle]="!hasLowercase"></i>
        At least one lowercase letter (a–z)
    </div>

    <div class="flex items-center gap-2" [class.text-green-600]="hasNumber" [class.text-red-500]="!hasNumber">
        <i class="bx" [class.bx-check-circle]="hasNumber" [class.bx-x-circle]="!hasNumber"></i>
        At least one number (0–9)
    </div>

    <div class="flex items-center gap-2" [class.text-green-600]="hasSpecialChar" [class.text-red-500]="!hasSpecialChar">
        <i class="bx" [class.bx-check-circle]="hasSpecialChar" [class.bx-x-circle]="!hasSpecialChar"></i>
        At least one special character (@ $ ! % * ? & #)
    </div>

    <div class="flex items-center gap-2" [class.text-green-600]="hasMinLength" [class.text-red-500]="!hasMinLength">
        <i class="bx" [class.bx-check-circle]="hasMinLength" [class.bx-x-circle]="!hasMinLength"></i>
        Minimum 8 characters
    </div>

    <div class="flex items-center gap-2" [class.text-green-600]="hasMaxLength" [class.text-red-500]="!hasMaxLength">
        <i class="bx" [class.bx-check-circle]="hasMaxLength" [class.bx-x-circle]="!hasMaxLength"></i>
        Maximum 32 characters
    </div>

</div>
}




            </div>

            <!-- CONFIRM PASSWORD -->
            <div class="relative">
                <input [type]="showConfirm ? 'text' : 'password'" formControlName="confirmPassword"
                    placeholder="Confirm new password" class="w-full rounded-xl border border-blue-200 px-4 py-2.5 pr-12
                 focus:ring-2 focus:ring-blue-500 outline-none" />

                <button type="button" (click)="showConfirm = !showConfirm" class="absolute right-4 top-3 text-gray-500">
                    <i class="bx" [class.bx-eye]="!showConfirm" [class.bx-eye-slash]="showConfirm"></i>
                </button>

               
                @if (confirmPassword?.touched && confirmPassword?.errors?.['required']) {
                <p class="text-red-500 text-xs mt-1">
                    Confirm password is required
                </p>
                }
                @if (
                form.errors?.['passwordMismatch'] &&
                confirmPassword?.touched &&
                !confirmPassword?.errors?.['required']
                ) {
                <p class="text-red-500 text-xs mt-1">
                    Passwords do not match
                </p>
                }
 
            </div>

            <!-- SUBMIT -->
            <button type="submit" class="w-full py-3 rounded-xl font-semibold text-white
               bg-gradient-to-r from-blue-500 to-indigo-600
               hover:from-blue-600 hover:to-indigo-700 transition">
                Update Password
            </button>

        </form>
    </div>
</div>