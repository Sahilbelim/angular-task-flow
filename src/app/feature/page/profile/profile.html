<div class="min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 pt-[83px] px-4">

    <!-- CONTAINER -->
    <div class="mx-auto lg:max-w-7xl xl:max-w-full p-6  w-full">

        <div class="rounded-2xl bg-white p-8 shadow-lg relative">

            <!-- ================= VIEW MODE ================= -->
            @if (!flipped) {

            <!-- TOP EDIT BUTTON -->
            <button (click)="flipCard()" class="absolute top-6 right-6 h-10 w-10 rounded-full
               bg-blue-50 text-blue-600
               flex items-center justify-center
               hover:bg-blue-100 transition">
                <i class="bx bx-edit-alt text-lg"></i>
            </button>

            <!-- TOP SECTION -->
            <div class="flex flex-col md:flex-row gap-8 items-center md:items-start">

                <!-- AVATAR (INITIALS) -->
                <div class="h-40 w-40 rounded-full
                 bg-gradient-to-br from-blue-500 to-indigo-600
                 flex items-center justify-center
                 text-white font-extrabold text-5xl
                 shadow ring-4 ring-blue-100 select-none">
                    {{ initials || 'U' }}
                </div>

                <!-- BASIC INFO -->
                <div class="flex-1 text-center md:text-left">

                    <h2 class="text-3xl font-bold text-gray-800">
                        {{ user?.name || 'Unnamed User' }}
                    </h2>

                    <p class="mt-1 font-medium text-blue-600">
                        <!-- {{ user?.email || 'Email not available' }} -->
                    </p>

                    <p class="mt-4 max-w-xl text-gray-600 leading-relaxed">
                        {{ user?.bio || 'No bio provided yet.' }}
                    </p>

                </div>
            </div>

            <!-- DIVIDER -->
            <div class="my-10 border-t border-blue-100"></div>

            <!-- DETAILS GRID -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                <!-- EMAIL -->
                <div class="rounded-xl bg-blue-50 p-5">
                    <p class="text-sm text-gray-500">Email</p>
                    <p class="font-semibold text-gray-800">
                        {{ user?.email || 'Not available' }}
                    </p>
                </div>

                <!-- PHONE -->
                <div class="rounded-xl bg-blue-50 p-5">
                    <p class="text-sm text-gray-500">Phone Number</p>
                    <p class="font-semibold text-gray-800">
                        {{ user?.phone || 'Not provided' }}
                    </p>
                </div>

                <!-- REGION / ADDRESS -->
                <div class="md:col-span-2 rounded-xl bg-blue-50 p-5">
                    <p class="text-sm text-gray-500">Region</p>
                    <p class="font-semibold text-gray-800">
                        {{ user?.region || 'Not specified' }}
                    </p>
                </div>

                <!-- JOINED -->
                <div class="md:col-span-2 rounded-xl bg-blue-50 p-5">
                    <p class="text-sm text-gray-500">Joined</p>
                    <p class="font-semibold text-gray-800">
                        {{ joinedDate || '—' }}
                    </p>
                </div>

            </div>

            }

            <!-- ================= EDIT MODE ================= -->
            @if (flipped) {

            <button (click)="flipCard()" class="absolute top-6 right-6 h-10 w-10
               rounded-full bg-red-50 text-red-600
               hover:bg-red-100 transition">
                ✕
            </button>

            <h3 class="mb-6 text-2xl font-bold text-gray-900">
                Edit Profile
            </h3>

            <form [formGroup]="profileForm" (ngSubmit)="saveProfile()" class="grid grid-cols-1 md:grid-cols-2 gap-5">

                <!-- NAME -->
                <input formControlName="name" placeholder="Full name" class="rounded-xl border border-blue-200 px-4 py-3
                 focus:ring-2 focus:ring-blue-500 outline-none" />

                <!-- EMAIL (LOCKED) -->
                <input [value]="user?.email || ''" disabled class="rounded-xl border border-gray-200
                 bg-gray-100 px-4 py-3
                 text-gray-500 cursor-not-allowed" />

                <!-- PHONE -->
                <input formControlName="phone" placeholder="Phone number" class="rounded-xl border border-blue-200 px-4 py-3
                 focus:ring-2 focus:ring-blue-500 outline-none" />

                <!-- REGION -->
                <input formControlName="region" placeholder="Region / Area" class="rounded-xl border border-blue-200 px-4 py-3
                 focus:ring-2 focus:ring-blue-500 outline-none" />

                <!-- BIO -->
                <div class="md:col-span-2">
                    <textarea rows="4" formControlName="bio" maxlength="250" placeholder="Bio (max 250 characters)"
                        class="w-full rounded-xl border border-blue-200
                   px-4 py-3 resize-none
                   focus:ring-2 focus:ring-blue-500 outline-none"></textarea>

                    <p class="mt-1 text-right text-xs text-gray-500">
                        {{ profileForm.get('bio')?.value?.length || 0 }}/250
                    </p>
                </div>

                <!-- SAVE -->
                <div class="md:col-span-2">
                    <button type="submit" class="w-full rounded-xl bg-gradient-to-r
                   from-blue-500 to-indigo-600
                   py-3 font-semibold text-white
                   hover:from-blue-600 hover:to-indigo-700 transition">
                        Save Changes
                    </button>
                </div>

            </form>

            }

        </div>
    </div>
</div>